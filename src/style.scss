@function lerp($var-from-rem, $var-from, $var-to) {
  @return calc(var(#{$var-from-rem}) +
    (var(#{$var-to}) - var(#{$var-from})) *
    (100vw - #{$viewport-from-rem}) /
    (#{$viewport-to} - #{$viewport-from}));
}

@mixin lerp($var, $from, $to) {

  // Sass vars
  $var-from: #{$var}-from;
  $var-to: #{$var}-to;

  $var-from-rem: #{$var-from}-rem;
  $var-to-rem: #{$var-to}-rem;

  // CSS vars
  #{$var-from}: $from;
  #{$var-to}: $to;

  #{$var-from-rem}: calc(1rem * var(#{$var-from}) / #{$font-size-base});
  #{$var-to-rem}: calc(1rem * var(#{$var-to}) / #{$font-size-base});

  #{$var}: lerp($var-from-rem, $var-from, $var-to);

  @media (max-width: $viewport-from-px) {
    #{$var}: var($var-from-rem);
  }

  @media (min-width: $viewport-to-px) {
    #{$var}: var($var-to-rem);
  }
}

// Vars

$font-size-base: 16 !default;

// TODO?
// $space: (
//   name: 'space',
//   from: 16,
//   to: 24,
// )

$space-from: 16 !default;
$space-to: 24 !default;

$viewport-from: 360 !default;
$viewport-to: 1024 !default;

$font-size-body-from: 16 !default;
$font-size-body-to: 18 !default;

$font-size-h1-from: 36 !default;
$font-size-h1-to: 48 !default;

// Read-only
$viewport-from-rem: 1rem * $viewport-from / $font-size-base;
$viewport-from-px: 1px * $viewport-from;

$viewport-to-rem: 1rem * $viewport-to / $font-size-base;
$viewport-to-px: 1px * $viewport-to;

// TODO: font heading scaling factor..
// $font-size-scale: 1.2;

:root {

  // Read-only
  @include lerp('--space', $space-from, $space-to);

  @include lerp('--font-size-body', $font-size-body-from, $font-size-body-to);

  @include lerp('--font-size-h1', $font-size-h1-from, $font-size-h1-to);

  --space-neg: calc(-1 * var(--space));
  --space-1: calc(0.25 * var(--space));
  --space-2: calc(0.5 * var(--space));
  --space-3: var(--space); // default
  --space-4: calc(2 * var(--space));
  --space-5: calc(4 * var(--space));
  --space-6: calc(8 * var(--space));
  --space-7: calc(16 * var(--space));
}

html {
  box-sizing: border-box;
}

*, *:before, *:after {
  box-sizing: inherit;
}

body {
  margin: 0;
  padding: 0;
  font-family: sans-serif;
}

h1 {
  font-size: var(--font-size-h1);
}

.m { margin: var(--space); }
.m-1 { margin: var(--space-1); }
.m-2 { margin: var(--space-2); }
.m-3 { margin: var(--space-3); }
.m-4 { margin: var(--space-4); }
.m-5 { margin: var(--space-5) }
.m-6 { margin: var(--space-6) }
.m-7 { margin: var(--space-7) }

.p { padding: var(--space); }
.p-1 { padding: var(--space-1); }
.p-2 { padding: var(--space-2); }
.p-3 { padding: var(--space-3); }
.p-4 { padding: var(--space-4); }
.p-5 { padding: var(--space-5) }
.p-6 { padding: var(--space-6) }
.p-7 { padding: var(--space-7) }

.mb { margin-bottom: var(--space); }
.mb-1 { margin-bottom: var(--space-1); }
.mb-2 { margin-bottom: var(--space-2); }
.mb-3 { margin-bottom: var(--space-3); }
.mb-4 { margin-bottom: var(--space-4); }
.mb-5 { margin-bottom: var(--space-5) }
.mb-6 { margin-bottom: var(--space-6) }
.mb-7 { margin-bottom: var(--space-7) }

.mt { margin-top: var(--space); }
.mt-1 { margin-top: var(--space-1); }
.mt-2 { margin-top: var(--space-2); }
.mt-3 { margin-top: var(--space-3); }
.mt-4 { margin-top: var(--space-4); }
.mt-5 { margin-top: var(--space-5) }
.mt-6 { margin-top: var(--space-6) }
.mt-7 { margin-top: var(--space-7) }

.pb { padding-bottom: var(--space); }
.pb-1 { padding-bottom: var(--space-1); }
.pb-2 { padding-bottom: var(--space-2); }
.pb-3 { padding-bottom: var(--space-3); }
.pb-4 { padding-bottom: var(--space-4); }
.pb-5 { padding-bottom: var(--space-5) }
.pb-6 { padding-bottom: var(--space-6) }
.pb-7 { padding-bottom: var(--space-7) }

.grid {
  margin-left: var(--space-neg);
}

.cell {
  display: inline-block;
  width: 100%;
  padding-left: var(--space);
}

.grid > .cell {
  margin-bottom: var(--space);
}

.w1\/2 {
  width: 50%;
}

.w1\/3 {
  width: 33.333333%;
}

.content {
  background-color: blue;
  padding: var(--space);
}

.container {
  padding-left: var(--space);
  padding-right: var(--space);
}

.h {
  background-color: fuchsia;
  height: var(--space-x2)
}

body {
  font-size: var(--font-size-body);
}